<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025Âæ∑ÂõΩÂèä‰∏úÊ¨ßÊóÖË°åË°åÁ®ãÂçï</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #EAE0DA;
            color: #5C5A58;
        }
        h1, h2 { color: #4E4A47; }
        .day {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #B8B5B2;
            border-radius: 8px;
            background-color: #F2ECE4;
        }
        .expense-category {
            margin-top: 10px;
        }
        .expense-category label {
            display: inline-block;
            width: 80px;
        }
        .notes {
            margin-top: 10px;
            padding: 5px;
            border: 1px solid #ccc;
            background: #f9f9f9;
            min-height: 50px;
        }
        #map {
            height: 500px;
            width: 100%;
            margin-top: 20px;
            border-radius: 8px;
        }
        button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #4E4A47;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #6C6865;
        }
    </style>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // ÂàùÂßãÂåñÂú∞Âõæ
        function initMap() {
            var map = L.map('map').setView([48.1351, 11.5820], 4);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'
            }).addTo(map);

            var locations = [
                {name: "Âæ∑Á¥ØÊñØÈ°ø", lat: 51.0504, lng: 13.7373},
              	{name: "Â∏ÉÊãâÊ†º", lat: 50.0755, lng: 14.4378},
              	{name: "‰ºäÊñØÂù¶Â∏ÉÂ∞î", lat: 41.0082, lng: 28.9784},
                {name: "ÈõÖÂÖ∏", lat: 37.9878, lng: 23.7324},
                {name: "Â∏ÉËææ‰Ω©ÊñØ", lat: 47.4979, lng: 19.0402},
              	{name: "ÊüèÊûó", lat: 52.5200, lng: 13.4050}
            ];

            var latlngs = locations.map(loc => [loc.lat, loc.lng]);

            locations.forEach(location => {
                L.marker([location.lat, location.lng]).addTo(map)
                    .bindPopup(`<b>${location.name}</b>`);
            });

            L.polyline(latlngs, {color: 'red'}).addTo(map);
        }

        // Êõ¥Êñ∞ÊÄªÊîØÂá∫
        function updateTotalExpense() {
            let totalExpense = 0;
            document.querySelectorAll('.day').forEach(day => {
                let accommodation = parseFloat(day.querySelector('.accommodation-input').value) || 0;
                let transport = parseFloat(day.querySelector('.transport-input').value) || 0;
                let play = parseFloat(day.querySelector('.play-input').value) || 0;
                let food = parseFloat(day.querySelector('.food-input').value) || 0;
                let shopping = parseFloat(day.querySelector('.shopping-input').value) || 0;
                totalExpense += accommodation + transport + play + food + shopping;
            });
            document.getElementById('total-expense').innerText = `ÊÄªÊîØÂá∫: ‚Ç¨${totalExpense.toFixed(2)}`;
            saveData(); // ‰øùÂ≠òÊï∞ÊçÆ
        }

                // ‰øùÂ≠òÊï∞ÊçÆÂà∞ localStorage
        function saveData() {
            let activities = [];
            document.querySelectorAll('.day').forEach(day => {
                let title = day.querySelector('h3').innerText;
                let details = day.querySelector('.details').innerText;
                let accommodation = day.querySelector('.accomodation-input').value;
                let transport = day.querySelector('.transport-input').value;
                let play = day.querySelector('.play-input').value;
                let food = day.querySelector('.food-input').value;
                let shopping = day.querySelector('.shopping-input').value;
                let notes = day.querySelector('.notes').innerHTML;
                activities.push({ title, details, accommodation, transport, play, food, shopping, notes });
            });
            let todos = Array.from(document.querySelectorAll('#todo-list li')).map(item => ({ text: item.innerText, checked: item.querySelector('input').checked }));
            let shoppingList = Array.from(document.querySelectorAll('#shopping-list li')).map(item => ({ text: item.innerText, checked: item.querySelector('input').checked }));
            
            localStorage.setItem('travelData', JSON.stringify(activities));
            localStorage.setItem('todoList', JSON.stringify(todos));
            localStorage.setItem('shoppingList', JSON.stringify(shoppingList));
        }

        // Âä†ËΩΩÊï∞ÊçÆÔºåÊØèÊ¨°ÂàùÂßãÂåñÊó∂ÈÉΩÂä†ËΩΩ
        function loadData() {
            let data = localStorage.getItem('travelData');
            let activities = data ? JSON.parse(data) : [];

            if (activities.length === 0) {
                console.log("No saved data, using default activities...");
                activities = [
                    { title: "3Êúà9Êó• - ÊüèÊûó ‚Üí Âæ∑Á¥ØÊñØÈ°ø", details: "‰∫§ÈÄö: üöå FLIXBUS ÊüèÊûóBER->Âæ∑Á¥ØÊñØÈ°øHbf\nÊ∏∏ËßàËÆ°Âàí: üìå Âæ∑Á¥ØÊñØÈ°øÔºöÂçöÁâ©È¶Ü\n Ë¥≠Áâ©Ê∏ÖÂçï: Êó†", accommodation: 0, transport: 58, play: 0, food: 0, shopping: 0, notes: "8:00 Âº†ÂØºÂà∞ËææÊüèÊûóÊú∫Âú∫Êé•Êú∫ÔºåÈ¢ÑËÆ°È©¨Â•≥Â£´Âá∫ÂÖ≥Êó∂Èó¥1Â∞èÊó∂\n 9:25 Âùê‰∏äFlixbusÂ§ßÂ∑¥ËΩ¶\n 12:05 Âà∞ËææÂº†ÂØºÂÖ¨ÂØìÂÆâÈ°ø\n 14:00 Âá∫ÂèëÂéªÂæ∑Á¥ØÊñØÈ°øÊòìÂåóÊ≤≥ËÄÅÂüéÂå∫\n 18:00 ÊôöÈ•≠ \n 20:00 ÂõûÂÖ¨ÂØìÊî∂ÊãæË°åÊùéÁù°Ëßâ" },
                    { title: "3Êúà10Êó• - Âæ∑Á¥ØÊñØÈ°ø ‚Üí Â∏ÉÊãâÊ†º", details: "‰∫§ÈÄö: üöÑ ÁÅ´ËΩ¶ Âæ∑Á¥ØÊñØÈ°øHbfÂâçÂæÄÂ∏ÉÊãâÊ†ºPraha hl.n. 8:10-10:26Ôºà2Â∞èÊó∂16ÂàÜÈíüÔºâ\n Ê∏∏ËßàËÆ°Âàí: üìå Â∏ÉÊãâÊ†º: Ëá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÂÜ∞ÁÆ±Ë¥¥", accommodation: 80.00, transport: 100.00, play: 20.00, food: 40.00, shopping: 30.00, notes: "" },
                    { title: "3Êúà11Êó• - Â∏ÉÊãâÊ†º ‚Üí ‰ºäÊñØÂù¶Â∏ÉÂ∞î", details: "‰∫§ÈÄö: ‚úàÔ∏è È£ûÊú∫ Â∏ÉÊãâÊ†ºPRGÂâçÂæÄ‰ºäÊñØÂù¶Â∏ÉÂ∞îSAW 09:20-13:55\n Ê∏∏ËßàËÆ°Âàí: üìå ‰ºäÊñØÂù¶Â∏ÉÂ∞îÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÂÜ∞ÁÆ±Ë¥¥ÔºåÈ¶ôÊ∞¥Â∞èÁì∂", accommodation: 120.00 , transport: 161.20, play: 80.00, food: 80.00, shopping:50.00, notes: "" },
                    { title: "3Êúà12Êó• - ‰ºäÊñØÂù¶Â∏ÉÂ∞î", details: "‰∫§ÈÄö: üöåüö¢ Â∏ÇÂÜÖ‰∫§ÈÄö\n Ê∏∏ËßàËÆ°Âàí: üìå ‰ºäÊñØÂù¶Â∏ÉÂ∞îÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÊöÇÊó†", accommodation: 120.00 ,transport: 40.00, play: 200.00, food: 80.00, shopping:70.00, notes: "" },
                    { title: "3Êúà13Êó• - ‰ºäÊñØÂù¶Â∏ÉÂ∞î", details: "‰∫§ÈÄö: üöåüö¢ Â∏ÇÂÜÖ‰∫§ÈÄö\n Ê∏∏ËßàËÆ°Âàí: üìå ‰ºäÊñØÂù¶Â∏ÉÂ∞îÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÊöÇÊó†", accommodation: 120.00 ,transport: 20.00, play: 200.00, food: 80.00, shopping:50.00, notes: "" },
                    { title: "3Êúà14Êó• - ‰ºäÊñØÂù¶Â∏ÉÂ∞î ‚Üí ÈõÖÂÖ∏", details: "‰∫§ÈÄö: ‚úàÔ∏è È£ûÊú∫ ‰ºäÊñØÂù¶Â∏ÉÂ∞îISTÂâçÂæÄÈõÖÂÖ∏ATH 12:00-12:25Ôºà1Â∞èÊó∂25ÂàÜÈíüÔºâ\n Ê∏∏ËßàËÆ°Âàí: üìå ÈõÖÂÖ∏ÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: Êó†", accommodation: 100.00 ,transport: 161.20, play: 80.00, food: 80.00, shopping:50.00, notes: "" },
                    { title: "3Êúà15Êó• - ÈõÖÂÖ∏", details: "‰∫§ÈÄö: üöåüö¢ Â∏ÇÂÜÖ‰∫§ÈÄö\n Ê∏∏ËßàËÆ°Âàí: üìå ÈõÖÂÖ∏ÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÊöÇÊó†", accommodation: 100.00 , transport: 20.00, play: 80.00, food: 80.00, shopping:30.00, notes: "" },
                    { title: "3Êúà16Êó• - ÈõÖÂÖ∏ ‚Üí Â∏ÉËææ‰Ω©ÊñØ", details: "‰∫§ÈÄö: ‚úàÔ∏è È£ûÊú∫ ÈõÖÂÖ∏ATHÂâçÂæÄÂ∏ÉËææ‰Ω©ÊñØBUD 05:50-07:00Ôºà2Â∞èÊó∂10ÂàÜÈíüÔºâ\n Ê∏∏ËßàËÆ°Âàí: üìå Â∏ÉËææ‰Ω©ÊñØÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÂÜ∞ÁÆ±Ë¥¥", accommodation: 100.00 ,transport: 148.42, play: 40.00, food: 60.00, shopping:50.00, notes: "" },
                    { title: "3Êúà17Êó• - Â∏ÉËææ‰Ω©ÊñØ", details: "‰∫§ÈÄö: üöåüö¢ Â∏ÇÂÜÖ‰∫§ÈÄö\n Ê∏∏ËßàËÆ°Âàí: üìå Â∏ÉËææ‰Ω©ÊñØÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÊöÇÊó†", accommodation: 100.00 , transport: 20.00, play: 80.00, food: 80.00, shopping:30.00, notes: "" },
                    { title: "3Êúà18Êó• - Â∏ÉËææ‰Ω©ÊñØ ‚Üí ÊüèÊûó ‚Üí Âæ∑Á¥ØÊñØÈ°ø", details: "‰∫§ÈÄö: ‚úàÔ∏è È£ûÊú∫ Â∏ÉËææ‰Ω©ÊñØBUDÂâçÂæÄÊüèÊûóBER 11:30-13:00Ôºà1Â∞èÊó∂30ÂàÜÈíüÔºâ üöÑ ÁÅ´ËΩ¶ ÊüèÊûóÂâçÂæÄÂæ∑Á¥ØÊñØÈ°øHbf 19:05-21:07Ôºà2Â∞èÊó∂2ÂàÜÈíüÔºâ\n Ê∏∏ËßàËÆ°Âàí: üìå ÊüèÊûóÔºöËá™Áî±Ë°åÔºåÂæ∑Á¥ØÊñØÈ°øÔºöËá™Áî±Ë°å\n Ë¥≠Áâ©Ê∏ÖÂçï: ÂÜ∞ÁÆ±Ë¥¥", accommodation: 0 ,transport: 150.37, play: 40.00, food: 20.00, shopping: 100.00, notes: "" },
                    { title: "3Êúà19Êó• - Âæ∑Á¥ØÊñØÈ°ø", details: "‰∫§ÈÄö: üöå Â∏ÇÂÜÖ‰∫§ÈÄö\n Ê∏∏ËßàËÆ°Âàí: üìå Âæ∑Á¥ØÊñØÈ°øÔºöÂ∞èÁëûÂ£´ÂõΩÂÆ∂ÂÖ¨Âõ≠\n Ë¥≠Áâ©Ê∏ÖÂçï: ÊöÇÊó†", accommodation: 0 , transport: 10.00, play: 80.00, food: 40.00, shopping:60.00, notes: "" },
                    { title: "3Êúà20Êó• - Âæ∑Á¥ØÊñØÈ°ø", details: "‰∫§ÈÄö: üöå Â∏ÇÂÜÖ‰∫§ÈÄö\n Ê∏∏ËßàËÆ°Âàí: üìå Âæ∑Á¥ØÊñØÈ°øÔºöÂäûÂÖ¨ÂÆ§ÔºåÊòüÂ∑¥ÂÖãÔºåË¥≠Áâ©\n Ë¥≠Áâ©Ê∏ÖÂçï: ÊöÇÊó†", accommodation: 0 , transport: 10.00, play: 80.00, food: 40.00, shopping:260.00, notes: "" },
                    { title: "3Êúà21Êó• - Âæ∑Á¥ØÊñØÈ°ø ‚Üí ÊüèÊûó", details: "‰∫§ÈÄö:  üöå FLIXBUS Âæ∑Á¥ØÊñØÈ°øHbfÂâçÂæÄÊüèÊûóBER 7:50-10:00Ôºà2Â∞èÊó∂10ÂàÜÈíüÔºâ\n Ê∏∏ËßàËÆ°Âàí: Êó†\n Ë¥≠Áâ©Ê∏ÖÂçï: Êó†", accommodation: 0, transport: 40.00, play: 0, food: 20.00, shopping: 30.00, notes: "" }
                ];
                localStorage.setItem('travelData', JSON.stringify(activities));
            }
            
            // Ê∏ÖÁ©∫ÊóßÊï∞ÊçÆÔºåÈáçÊñ∞Âä†ËΩΩ
            document.getElementById("activities").innerHTML = "";
            activities.forEach(activity => {
                addActivity(activity.title, activity.details, activity.accommodation, activity.transport, activity.play, activity.food, activity.shopping, activity.notes);
            });

            updateTotalExpense();
         	
          	let todos = JSON.parse(localStorage.getItem('todoList')) || [];
            let shoppingList = JSON.parse(localStorage.getItem('shoppingList')) || [];
            updateList('todo-list', todos);
            updateList('shopping-list', shoppingList);

        }

        // Ê∑ªÂä†Ë°åÁ®ãÊ¥ªÂä®
        function addActivity(title, details, accommodation = 0, transport = 0, play = 0, food = 0, shopping = 0, notes = "") {
            let container = document.getElementById("activities");
            let newActivity = document.createElement("div");
            newActivity.classList.add("day");
            newActivity.innerHTML = `
                <h3>${title}</h3>
                <p class="details">${details.replace(/\n/g, '<br>')}</p>
                <div class="expense-category">
                    <label>‰ΩèÂÆø:</label>
                    <input type="number" class="accommodation-input" value="${accommodation}" onchange="updateTotalExpense()"> ‚Ç¨
                </div>
                <div class="expense-category">
                    <label>‰∫§ÈÄö:</label>
                    <input type="number" class="transport-input" value="${transport}" onchange="updateTotalExpense()"> ‚Ç¨
                </div>
                <div class="expense-category">
                    <label>Ê∏∏Áé©:</label>
                    <input type="number" class="play-input" value="${play}" onchange="updateTotalExpense()"> ‚Ç¨
                </div>
                <div class="expense-category">
                    <label>È•ÆÈ£ü:</label>
                    <input type="number" class="food-input" value="${food}" onchange="updateTotalExpense()"> ‚Ç¨
                </div>
                <div class="expense-category">
                    <label>Ë¥≠Áâ©:</label>
                    <input type="number" class="shopping-input" value="${shopping}" onchange="updateTotalExpense()"> ‚Ç¨
                </div>
                <div class="notes" contenteditable="true" style="margin-top:10px; padding:5px; border:1px solid #ccc; background:#f9f9f9;">${notes}</div>
            `;
            container.appendChild(newActivity);
        }
      
      	function updateList(id, items) {
            let list = document.getElementById(id);
            list.innerHTML = '';
            items.forEach(item => {
                let li = document.createElement('li');
                let checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = item.checked;
                li.appendChild(checkbox);
                li.appendChild(document.createTextNode(item.text));
                list.appendChild(li);
            });
        }

        function addItem(id) {
            let input = document.getElementById(id + '-input');
            let list = document.getElementById(id);
            if (input.value.trim() !== "") {
                let li = document.createElement('li');
                let checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                li.appendChild(checkbox);
                li.appendChild(document.createTextNode(input.value));
                list.appendChild(li);
                input.value = "";
            }
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        window.onload = function() {
            initMap();
            loadData(); // Áõ¥Êé•Âä†ËΩΩÊï∞ÊçÆ
        };
    </script>
</head>
<body>
    <h1>Âæ∑ÂõΩÂúüËÄ≥ÂÖ∂Â••Âú∞Âà©Êç∑ÂÖãÊóÖË°åË°åÁ®ãÂçïÔºà2025Âπ¥3Êúà9Êó• - 2025Âπ¥3Êúà21Êó•Ôºâ</h1>
  	<div id="map"></div>
    <h2>‰ª£Âäû‰∫ãÂÆú</h2>
    <input type="text" id="todo-list-input" placeholder="ËæìÂÖ•‰ª£Âäû‰∫ãÈ°π...">
    <button onclick="addItem('todo-list')">Ê∑ªÂä†</button>
    <ul id="todo-list"></ul>
    
    <h2>Ë¥≠Áâ©Ê∏ÖÂçï</h2>
    <input type="text" id="shopping-list-input" placeholder="ËæìÂÖ•Ë¥≠Áâ©È°πÁõÆ...">
    <button onclick="addItem('shopping-list')">Ê∑ªÂä†</button>
    <ul id="shopping-list"></ul>
    
    <h2>ÊØèÊó•Ë°åÁ®ã</h2>
    <div id="activities"></div>
    
    <h2>üí∞ ÊÄªÊîØÂá∫</h2>
    <p id="total-expense">ÊÄªÊîØÂá∫: ‚Ç¨0.00</p>
</body>
</html>
